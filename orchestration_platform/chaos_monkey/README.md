# Chaos Monkey Script

## Overview
The `script.py` is designed to simulate failures in a controlled environment to test the resilience of virtual networks managed by the orchestration platform. 

## Features
- Randomized failure injection.
- Logging of all disruptions for analysis.
- Safe execution with rollback mechanisms.

## Design
During initialization, the script will self-configure using the orchestration platform API.
Then multiple threads will get started:
1. Handles background traffic generation, emulating web server traffic and video streaming traffic.
2. Handles creation of realistic small (simple) loss events and more complex losses on links.
3. Handles creation of realistic small (simple) delay events.
The main thread will then transition into "chaos monkey mode," where it will randomly perform some of the following actions:
- Disconnect a router.
- Bring down a link.
- Change a link's bandwidth.
- Add a static route.
- Change OSPF weight.
- Add some loss rate on a link.
- Change a link's delay.

Limitations: There can never be two simultaneous events in the chaos monkey script that modify the same link and value (i.e., a link can't be brought down while it has some percentage loss). If such an event gets generated by the chaos monkey, it will simply fail and not be executed. This limitation does not apply to losses and delays done by the thread responsible for creating realistic events (i.e., if the chaos monkey added some fixed delay on a link, the delay handling thread can still add a delay spike).

Unrolling: Most events will be undone after some amount of time. Exceptions to this are changing the OSPF weight, changing a link's bandwidth, and changing a link's delay.

## Usage
```
python3 script.py [-h] [--api-url API_URL] [--seed SEED]

Chaos Monkey Script

options:
  -h, --help         Show this help message and exit.
  --api-url API_URL  Base URL for the API (default: http://localhost:5432).
  --seed SEED        Random seed for reproducibility (default: 42).
```
3. Review the logs in the `logs/` directory.
